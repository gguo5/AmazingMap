<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

        <link href="css/travel_map.css" rel="stylesheet" type="text/css" />
        <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css' />	
        <link href='http://fonts.googleapis.com/css?family=Share:700' rel='stylesheet' type='text/css'/>

        <script language="Javascript" type="text/javascript" src="js/jquery-1.9.1.min.js"></script>	
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBNoi1OiLgZh3et2pgEE_uZPmhw_xiifjw&sensor=true"></script>
        <script type="text/javascript">
            var map;
            var infoWindow;

            function initialize() {
                var mapDiv = document.getElementById('map-canvas');
                var mapOptions = {
                    center: new google.maps.LatLng(58, 16),
                    disableDefaultUI: true,
                    zoom: 5,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                map = new google.maps.Map(mapDiv,mapOptions);
 
                infoWindow = new google.maps.InfoWindow({ maxWidth: 100});
      
                google.maps.event.addListenerOnce(map, 'tilesloaded', addMarkers);
                google.maps.event.addListener(map, 'click', function() {
                    infoWindow.close();
                });
            }
      
            function addMarkers() {
 
                $.getJSON("places.json", function(results) {
                    for (var i = 0; i < results.features.length; i++) {
                        var place = results.features[i];
                        var coords = place.coordinates;
                        var latLng = new google.maps.LatLng(coords[0],coords[1]);
                        createMarker(map, latLng, place.description);   
                    }
                });
                
                function createMarker(map, position, desc) {
                    var marker = new google.maps.Marker({
                        position: position,
                        map: map
                    });
                    google.maps.event.addListener(marker, 'click', function() {
                        infoWindow.setContent(desc);
                        infoWindow.open(map, marker);
                    });
                }
            }
       
            google.maps.event.addDomListener(window, 'load', initialize);
            
            $(document).ready(function() {
                $('#countdown_dashboard').countDown({
                    targetDate: {
                        'day': 		12,
                        'month': 	8,
                        'year': 	2014,
                        'hour': 	0,
                        'min': 		0,
                        'sec': 		0					
                    }//,omitWeeks: false
                });           
            });
        </script>
    </head>
    <body>
        <div id="travel_map_page" class="page">
            <div id="map-canvas" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0; z-index: 0;"></div>
        </div><!-- end travel map page --> 
    </body>
</html>
